{# Dime/TimetrackerFrontednBundle/Resources/views/Dashboard/index.html.twig #}
<header>
  <div class="pull-right">
    <a href="#activity/add" class="btn btn-large" title="Add activity"><i class="icon-plus"></i></a>
  </div>
  <h1 class="title">Activity</h1>
</header>

<div id="activities" class="loading"></div>

<script type="text/template" id="tpl-activity-item">
  <h3 class="title">
    <div class="btn-toolbar pull-right">
      <div class="btn-group">
        <% if (model.runningTimeslice()) { %>
        <button class="track stop btn btn-danger"><i class="icon-time icon-white"></i></button>
        <% } else { %>
        <button class="track start btn btn-success"><i class="icon-time icon-white"></i></button>
        <% } %>
        <button data-duration="<%- data.duration %>" class="duration btn disabled" disabled><%- model.formatDuration(data.duration) %></button>
      </div>
    </div>
    <%= _.escape(data.description || '<no description>') %>
  </h3>
  <div class="details">
    <div class="pull-right">
      <a class="edit" href="#activity/<%- data.id %>/timeslice/add"><i class="icon-plus"></i> Timeslice</a>
      <a class="edit" href="#activity/<%- data.id %>/edit"><i class="icon-pencil"></i> Edit</a>
      <a class="delete" href="#activity/<%- data.id %>/delete"><i class="icon-remove"></i> Delete</a>
    </div>
    <p>
    <% if (model.relation('customer')) { %>
    <a href="#customer/<%- model.relation('customer', 'id') %>/edit" title="@<%- model.relation('customer', 'alias') %>"><%- model.relation('customer', 'name') %></a>
    <% } %>
    <% if (model.relation('project')) { %>
    / <a href="#project/<%- model.relation('project', 'id') %>/edit" title="@<%- model.relation('project', 'alias') %>"><%- model.relation('project', 'name') %></a>
    <% } %>
    <% if (model.relation('service')) { %>
    : <a href="#service/<%- model.relation('service', 'id') %>/edit"  title="@<%- model.relation('service', 'alias') %>"><%- model.relation('service', 'name') %></a>
    <% } %>
    </p>
  </div>
</script>
